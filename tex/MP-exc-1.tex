\documentclass{article}


\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{hyperref}

\usepackage{enumitem}
\setlist{nosep} % or \setlist{noitemsep} to leave space around whole list

\begin{document}

\title{Programming Exercise 1: Flow Formulations}
\author{Martin Sturm}
\maketitle
              
\section{Introduction}
artificial edge handling

\section{Single Commodity Flow}

\paragraph{Model:}
\newcommand{\binaries}{\{0, 1\}}
\newcommand{\edgesum}{\displaystyle \sum_{(i, j) \in E}}
\newcommand{\nodesum}{\displaystyle \sum_{i \in V^+}}
\newcommand{\vflow}{F_{ij}}
\newcommand{\vflowrev}{F_{ji}}
\newcommand{\vedge}{X_{ij}}
\newcommand{\vnode}{X_{i}}


\begin{equation}
\begin{array}{r r c l r}
\displaystyle \min & \edgesum {\vedge w_e} \\
\textrm{s.t.}  

& \edgesum \vedge & = & k & \\
& \nodesum \vnode & = & k + 1 & \\
& \displaystyle \sum_{(0, j) \in E} F_{0j} & = & k& \\
& \displaystyle \sum_{j \in \delta^+} \vflow - \displaystyle \sum_{j \in \delta^-} \vflow& = & \vnode & \forall i \in V^+ \\
& \vflow + \vflowrev & \leq & \vedge k & \forall (i,j) \in E \\

& \vflow & \in & [0, k]  &  \forall (i,j) \in E\\
&\vflowrev & \in & [0, k]  &  \forall (i,j) \in E, j \neq 0\\
& \vedge & \in & \binaries  &  \forall (i,j) \in E\\
& \vnode & \in & \binaries  &  \forall i \in V^+\\

\end{array}
\end{equation}

\paragraph{Variables} We introduce two sets of variables:
\begin{itemize}
	\item flow: $\vflow \in [0, k]$ models the real valued flow over an edge. Note that flow is directed which is why we introduce two variables per edge of the original graph, except for the edges adjacent to $0$ where only outgoing flow is needed.
	\item edge: binary decision variables for edges of the original graph.
	\item node: binary decision variables for nodes of the original graph excluding the artificial source node. 
\end{itemize}

\paragraph{Objective} The objective is to minimize the weighted sum of all selected edges. Note that this value includes the weight of the artificial source edges which has to be subtracted to obtain the real solution value.
\paragraph{Constraints}
\begin{itemize}
	\item edge selection: $k$ edges are in the solution.
	\item node selection: $k + 1$ nodes are in the solution. TODO check if this is correct
\end{itemize}


\section{Multi Commodity Flow}

\paragraph{Model:}
\newcommand{\vkflow}{F_{ijk}}
\newcommand{\vkflowrev}{F_{jik}}
\newcommand{\ksum}{\displaystyle \sum_{k \in V^+}}
\begin{equation}
\begin{array}{r r c l r}
\displaystyle \min & \edgesum {\vedge w_e} \\
\textrm{s.t.}  

& \edgesum \vedge & = & k & \\
& \nodesum \vnode & = & k + 1 & \\
& \displaystyle \sum_{(0, j) \in E} F_{0jk} & = & X_k & \forall k \in V^+ \\

& \displaystyle \sum_{j \in \delta^+} F_{jik} & = & \displaystyle \sum_{j \in \delta^-} F_{ijk} & \forall i, k \in V^+, i \neq k \\
& \displaystyle \sum_{j \in \delta^+} F_{jii} - \displaystyle \sum_{j \in \delta^-} F_{iji}& = & \vnode & \forall i \in V^+ \\

& \ksum F_{ijk} + F_{jik} & \leq & \vedge k & \\

& \vkflow & \in & [0, 1]  &  \forall (i,j) \in E, k \in V^+\\
&\vkflowrev & \in & [0, 1]  &  \forall (i,j) \in E, k \in V^+, j \neq 0\\
& \vedge & \in & \binaries  &  \forall (i,j) \in E\\
& \vnode & \in & \binaries  &  \forall i \in V^+\\

\end{array}
\end{equation}
\paragraph{Variables} We introduce two sets of variables:
\begin{itemize}
	\item flow variables
	\item edge variables
	\item node variables
\end{itemize}

\paragraph{Objective} 
\paragraph{Constraints}

\section{Results}

\subsection{Computational Results}

\subsection{Interpretation}


\end{document}
